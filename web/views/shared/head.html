<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{{curPage}}--{{webConfig.Title}}</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="icon" href="/statics/favicon.ico">
    <link rel="stylesheet" href="/statics/layui/css/layui.css" media="all" />
    <link rel="stylesheet" href="/statics/css/index.css" media="all" />
    <script type="text/javascript" src="/statics/layui/layui.js"></script>
    {% block navTop %}

    {% endblock %}
    <style>
        .layui-nav .layui-this:after {
            bottom: -1px!important;
        }
        .layui-this>a:hover{
            background-color: #009688;
            color: #fff;
        }
        .red{color: red;}
        .disabled{background:#efefef;cursor: not-allowed;}
        /*
        .layui-nav-tree .layui-nav-child dd.layui-this, .layui-nav-tree .layui-nav-child dd.layui-this a, .layui-nav-tree .layui-this, .layui-nav-tree .layui-this>a, .layui-nav-tree .layui-this>a:hover {
            background-color: #f90;
            color: #fff;
        }
        .hideMenu {
            background-color: #f90;
        }
        */
    </style>
</head>
<body class="main_body">
<div class="layui-layout layui-layout-admin">
    <!-- 顶部 -->
    <div class="layui-header header">
        <div class="layui-main mag0">
            <a href="#" class="logo">{{webConfig.AppName}}</a>
            <!-- 显示/隐藏菜单 -->
            <a href="javascript:;" class="seraph hideMenu icon-caidan" id="text_menu"></a>
            <!-- 顶级菜单 -->
            <ul class="layui-nav mobileTopLevelMenus" mobile>
                <li class="layui-nav-item" data-menu="contentManagement">
                    <a href="javascrip:;"><i class="seraph icon-caidan"></i><cite></cite></a>
                    <dl class="layui-nav-child" id="mobileTopLevelMenusChild">

                        <dd class="contentManagement" data-menu="contentManagement"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe63c;">&#xe63c;</i><cite>首页</cite></a></dd>
                        <dd class="driverMan" data-menu="driverMan"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe656;">&#xe656;</i><cite>驾培</cite></a></dd>
                        <dd class="memberCenter" data-menu="memberCenter"><a href="javascript:;"><i class="seraph icon-icon10" data-icon="icon-icon10"></i><cite>用户</cite></a></dd>
                        <dd class="orderMan" data-menu="orderMan"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe62d;">&#xe62d;</i><cite>订单</cite></a></dd>
                        <dd class="deviceMan" data-menu="deviceMan"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe63b;">&#xe63b;</i><cite>设备</cite></a></dd>
                        <dd class="systemSettings" data-menu="systemSettings"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe620;">&#xe620;</i><cite>设置</cite></a></dd>
                        <dd class="seraphApi" data-menu="seraphApi"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe632;">&#xe632;</i><cite>权限</cite></a></dd>
                        <dd class="financeMan" data-menu="financeMan"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe65e;">&#xe65e;</i><cite>财务</cite></a></dd>
                        <dd class="censusMan" data-menu="censusMan"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe629;">&#xe629;</i><cite>统计</cite></a></dd>
                        <dd class="wisdomMan" data-menu="wisdomMan"><a href="javascript:;"><i class="layui-icon" data-icon="&#xe670;">&#xe670;</i><cite>智车</cite></a></dd>

                    </dl>
                </li>
            </ul>
            <ul class="layui-nav topLevelMenus" style="padding-left:0;" id="topLevelMenusChild" pc>

                <li class="layui-nav-item contentManagement" data-menu="contentManagement">
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe63c;">&#xe63c;</i><cite>首页</cite></a>
                </li>
                <li class="layui-nav-item driverMan" data-menu="driverMan" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe656;">&#xe656;</i><cite>驾培</cite></a>
                </li>
                <li class="layui-nav-item memberCenter" data-menu="memberCenter" pc>
                    <a href="javascript:;"><i class="seraph icon-icon10" data-icon="icon-icon10"></i><cite>用户</cite></a>
                </li>
                <li class="layui-nav-item orderMan" data-menu="orderMan" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe62d;">&#xe62d;</i><cite>订单</cite></a>
                </li>
                <li class="layui-nav-item deviceMan" data-menu="deviceMan" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe63b;">&#xe63b;</i><cite>设备</cite></a>
                </li>
                <li class="layui-nav-item systemSettings" data-menu="systemSettings" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe620;">&#xe620;</i><cite>设置</cite></a>
                </li>
                <li class="layui-nav-item seraphApi" data-menu="seraphApi" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe632;">&#xe632;</i><cite>权限</cite></a>
                </li>
                <li class="layui-nav-item financeMan" data-menu="financeMan" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe65e;">&#xe65e;</i><cite>财务</cite></a>
                </li>
                <li class="layui-nav-item censusMan" data-menu="censusMan" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe629;">&#xe629;</i><cite>统计</cite></a>
                </li>
                <li class="layui-nav-item wisdomMan" data-menu="wisdomMan" pc>
                    <a href="javascript:;"><i class="layui-icon" data-icon="&#xe670;">&#xe670;</i><cite>智车</cite></a>
                </li>

            </ul>
            <!-- 顶部右侧菜单 -->
            <ul class="layui-nav top_menu">

                <li class="layui-nav-item" pc>
                    <a href="javascript:;" class="clearCache"><i class="layui-icon" data-icon="&#xe640;">&#xe640;</i><cite>清除缓存</cite><span class="layui-badge-dot"></span></a>
                </li>
                <!--
                <li class="layui-nav-item lockcms" pc>
                    <a href="javascript:;"><i class="seraph icon-lock"></i><cite>锁屏</cite></a>
                </li>
                -->

                <li class="layui-nav-item" id="userInfo">
                    <a href="javascript:;"><img src="/statics/images/face.jpg" class="layui-nav-img userAvatar" width="35" height="35"><cite class="adminName">{{sessionInfo.Username}}</cite></a>
                    <dl class="layui-nav-child">

                        <dd><a href="javascript:;" data-url="page/user/userInfo.html"><i class="seraph icon-ziliao" data-icon="icon-ziliao"></i><cite>个人资料</cite></a></dd>
                        <dd><a href="javascript:;" data-url="page/user/changePwd.html"><i class="seraph icon-xiugai" data-icon="icon-xiugai"></i><cite>修改密码</cite></a></dd>
                        <dd><a href="javascript:;" class="showNotice"><i class="layui-icon">&#xe645;</i><cite>系统公告</cite><span class="layui-badge-dot"></span></a></dd>
                        <!--
                        <dd pc><a href="javascript:;" class="functionSetting"><i class="layui-icon">&#xe620;</i><cite>功能设定</cite><span class="layui-badge-dot"></span></a></dd>
                        -->
                        <dd pc><a href="javascript:;" class="changeSkin"><i class="layui-icon">&#xe61b;</i><cite>更换皮肤</cite></a></dd>
                        <dd><a href="javascript:;" onclick="doLogout();" class="signOut"><i class="seraph icon-tuichu"></i><cite>退出</cite></a></dd>
                    </dl>
                </li>
            </ul>
        </div>
    </div>
    <!-- 左侧导航 -->
    <div class="layui-side layui-bg-black">
        <div class="navBar layui-side-scroll" id="navBar">
            <ul class="layui-nav layui-nav-tree">
                <li class="layui-nav-item layui-this">
                    <!--
                    <a href="javascript:;" data-url="page/main.html"><i class="layui-icon" data-icon=""></i><cite>后台首页</cite></a>
                    -->
                </li>
            </ul>
        </div>
    </div>
    <!-- 右侧内容 -->
    <div class="layui-body layui-form" id="htmlBackground" style="border:0;overflow:auto;">
        <div class="layui-card" pc>
            <div class="layui-card-body" style="padding:12px 15px 8px 20px;line-height: 20px;">
				  <span class="layui-breadcrumb" lay-filter="breadcrumb" style="visibility: visible;">
					<a href="javascript:">{{firstTitle}}</a><span lay-separator="">/</span>
					<a href="javascript:;">{{secondTitle}}</a><span lay-separator="">/</span>
					<a><cite>{{curPage}}</cite></a>
				  </span>
                <span style="float:right;display:none;">
				  右边
				</span>
            </div>
        </div>
        <div style="clear: both;"></div>
        <div id="contextPage" style="padding: 0 20px;">
            {% block content %}

            {% endblock %}
        </div>
    </div>
    <!-- 底部 -->
    <!--
    <div class="layui-footer footer" style="display:none;">
        <p><span>copyright @2018 admin</span>　　<a onclick="donation()" class="layui-btn layui-btn-danger layui-btn-sm">欢迎使用</a></p>
    </div>
    -->
</div>

<!-- 移动导航 -->
<div class="site-tree-mobile"><i class="layui-icon">&#xe602;</i></div>
<div class="site-mobile-shade"></div>


<script>
    // 判断菜单路径
    function initMenu() {
        /*命名有规则的 v1代表版本号，一级，二级，三级菜单*/
        var curUrl = '{{curUrl}}'
        // console.log('---------------------------------', curUrl)
        if(curUrl.length>1){
            var str = curUrl; //  /v1/contentManagement/home/sys.html
            var array = str.split('/'); // [v1, contentManagement, home, sys.html]
            var menuFirst = array[3];
            var menuSecondTemp = array[4];
            if(menuSecondTemp.length>1){
                var array2 = menuSecondTemp.split('.');
                var menuSecond = array2[0];
                var cur_id = menuFirst+'4'+menuSecond;
                //console.log("cur_id: ",cur_id);

                //第一种：主动加载jquery模块
                layui.use(['jquery', 'layer'], function(){
                    var $ = layui.$;
                    // 后面就跟你平时使用jQuery一样
                    $("#"+cur_id).addClass("layui-this");
                    $("."+array[2]).addClass("layui-this");
                    $("#"+menuFirst).addClass("layui-nav-itemed");
                });

            }
        }
    }

    // 退出登录
    function doLogout() {
        console.log("doLogout")
        //询问框
        var info = {}
        layer.confirm('您确定安全退出？',function(){
            $.ajax({
                url:"/admin/login/doLogout",
                type:'post',
                contentType:'application/json',
                timeout: 10000,
                data:JSON.stringify(info),
                beforeSend:function () {
                    this.layerIndex = layer.load(0, { shade: [0.5, '#393D49'] });
                },
                success:function(data){
                    if(data.code === 0){
                        window.location.reload();
                    }else{
                        layer.msg(data.msg,{icon: 5}); //失败的表情,设置
                    }
                },
                error:function(xhr, textStatus, errorThrown) {
                    console.log('textStatus: '+textStatus+', errorThrown: '+errorThrown+', xhr.status:'+xhr.status + ', xhr.readyState:' + xhr.readyState);
                    // textStatus: error, errorThrown: , xhr.status:404, xhr.readyState:4
                    if (textStatus === 'timeout') {
                        layer.alert("请求服务器超时");
                    } else if (xhr.status >= 500){
                        layer.alert("服务器繁忙,请稍后");
                    } else{
                        layer.alert("退出失败");
                    }
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            })
        });
    }
</script>
<script type="text/javascript" src="/statics/js/common/index.js"></script>
<script type="text/javascript" src="/statics/js/cache.js"></script>
{% block footer %}

{% endblock %}
</body>
</html>
